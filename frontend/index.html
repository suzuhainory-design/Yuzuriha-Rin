<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Yuzuriha Rin Virtual Chat</title>
    <link rel="stylesheet" href="/static/styles.css">
</head>

<body>
    <div class="container">
        <!-- Config Panel -->
        <div class="config-panel" id="configPanel">
            <h2>⚙️ Configuration</h2>

            <div class="form-group">
                <label>LLM Provider</label>
                <select id="provider">
                    <option value="openai">OpenAI</option>
                    <option value="anthropic">Anthropic (Claude)</option>
                    <option value="deepseek">DeepSeek</option>
                    <option value="custom">Custom (OpenAI-compatible)</option>
                </select>
            </div>

            <div class="form-group">
                <label>API Key</label>
                <input type="password" id="apiKey" placeholder="sk-...">
            </div>

            <div class="form-group" id="baseUrlGroup" style="display: none;">
                <label>Base URL</label>
                <input type="text" id="baseUrl" placeholder="https://api.example.com/v1">
            </div>

            <div class="form-group">
                <label>Model</label>
                <input type="text" id="model" value="gpt-3.5-turbo">
            </div>

            <div class="form-group">
                <label>角色人设</label>
                <textarea id="personaInput"
                    rows="4">你是楪鈴（ゆずりは りん），一个温柔体贴但有时会害羞的少女。你说话自然随意，喜欢用一些可爱的语气词。用轻松的聊天风格回应。</textarea>
            </div>

            <div class="form-group">
                <label>Character Name</label>
                <input type="text" id="characterName" value="Rin">
            </div>

            <div class="form-group inline">
                <div>
                    <label for="emotionThemeToggle">情绪主题光效</label>
                    <div class="help-text">根据每次回复的情绪值，让界面边框发出柔和的情绪色光</div>
                </div>
                <label class="switch">
                    <input type="checkbox" id="emotionThemeToggle" checked>
                    <span class="slider"></span>
                </label>
            </div>

            <button id="saveConfig" class="btn-primary">Save & Start Chat</button>
        </div>

        <!-- Chat Interface -->
        <div class="chat-container" id="chatContainer" style="display: none;">
            <div class="wechat-shell">
                <div class="wechat-statusbar">
                    <span class="status-time" id="statusTime">9:41</span>
                    <div class="status-icons">
                        <span class="icon-signal"></span>
                        <span class="icon-wifi"></span>
                        <span class="icon-battery"></span>
                    </div>
                </div>

                <div class="wechat-header">
                    <button id="showConfig" class="back-button" aria-label="back"></button>
                    <div class="header-info">
                        <div class="contact-name" id="chatTitle">Rin</div>
                    </div>
                    <button class="menu-button" id="clearBtn" aria-label="clear" title="Clear conversation">
                        <span class="action-dot"></span>
                        <span class="action-dot"></span>
                        <span class="action-dot"></span>
                    </button>
                </div>

                <div class="messages" id="messages"></div>

                <div class="typing-hint" id="typingHint">对方正在输入...</div>

                <div class="wechat-input">
                    <button class="input-icon voice-btn" type="button" aria-label="voice"></button>
                    <div class="input-box">
                        <textarea id="userInput" rows="1" disabled></textarea>
                    </div>
                    <button class="input-icon emoji-btn" type="button" aria-label="emoji"></button>
                    <button class="input-icon plus-btn" type="button" aria-label="plus"></button>
                    <button id="toggleBtn" class="toggle-btn hidden" type="button" aria-label="send" disabled>发送</button>
                </div>
            </div>
        </div>
    </div>

    <script src="/static/chat_ws_v2.js"></script>
</body>

</html>
